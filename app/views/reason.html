<div class="row">
  <div class="panel panel-default">
    <div class="panel-heading">
      <div class="pull-left" style="margin-right:1em;">
        <span uib-dropdown on-toggle="toggled(open)">
          <a href id="menu-dropdown" uib-dropdown-toggle class="glyphicon glyphicon-menu-hamburger"></a>
          <ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="menu-dropdown">
            <li><a ng-click="newGraph()">New</a></li>
            <li><a ng-click="copyGraph()">Copy</a></li>
            <li><a ng-click="renameGraph()">Rename</a></li>
            <li><a ng-click="uploadGraph()">Upload</a></li>
            <li><a ng-click="downloadGraph()">Download</a></li>
            <li class="divider"></li>
            <li><a ng-click="graphProperties()">Properties</a></li>
            <li class="divider"></li>
            <li ng-class="{disabled: firebaseUser!==null}"><a ng-click="(firebaseUser!==null) || auth.$signInWithPopup('twitter')"><img src="images/Twitter_bird_logo_2012.svg" style="height:1em;" />
              Login with Twitter</a></li>
            <li ng-class="{disabled: firebaseUser===null}"><a ng-click="(firebaseUser===null) || auth.$signOut()">Logout</a></li>
          </ul>
        </span>
      </div>
      <i class="pull-right glyphicon glyphicon-pencil" title="Editable" style="color:green;" ng-show="graphEditable()"></i>
      <i class="pull-right glyphicon glyphicon-ban-circle" title="Read only"  style="color:red;" ng-hide="graphEditable()"></i>
      <h2 class="panel-title"> Graphical Claims - [{{graph.name}}]
        <span class="label label-info" ng-show="firebaseUser">{{ firebaseUser.displayName }}</span>
        <span class="label label-warning" ng-hide="firebaseUser">Anonymous</span>
      </h2>
    </div>

    <div class="panel-body">

      <ng-include ng-show="graph === null" src="'views/partials/reason-list.html'"></ng-include>

      <div class="panel panel-default">

        <div class="row">
          <!-- Wrapping in any sort of ng-show or ng-hide causes problems! -->
          <vis-network data="graphData" options="graphOptions" events="events" ng-events="events"></vis-network>
        </div>

        <ng-include src="'views/partials/reason-node.html'"></ng-include>
        <ng-include src="'views/partials/reason-edge.html'"></ng-include>

      </div>
    </div>
  </div>

  <ng-include src="'views/partials/bayesian-node.html'"></ng-include>
  <ng-include src="'views/partials/bayesian-edge.html'"></ng-include>

</div>

<div class="row" ng-show="false">
  <pre>
    {{graph | json}}
    {{selectedNodeObjects}}
    {{graphData   |  json}}
  </pre>
  //qownerProfile = {{ graph.owner }}, {{ graph.getOwnerProfile() }}
  <pre>
    Graph Editable: {{ graphEditable }} / {{ graphEditable }}
    Owner: {{ owner }}
    firebaseUser: {{ firebaseUser.uid }}
  </pre>
</div>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
